generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum UserRole {
  ADMIN
  USER
}

model User {
  id          String   @id @default(uuid())
  clerkUserId String   @unique
  name        String
  email       String   @unique
  role        UserRole @default(USER)
  isActive    Boolean  @default(true)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  tickets  Ticket[]
  comments Comment[]
}

enum TicketStatus {
  OPEN
  IN_PROGRESS
  CLOSED
}

model Ticket {
  id          String       @id @default(uuid())
  userId      String
  title       String
  description String
  status      TicketStatus @default(OPEN)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user     User      @relation(fields: [userId], references: [id])
  comments Comment[]
}

model Comment {
  id       String @id @default(uuid())
  ticketId String
  userId   String
  content  String

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  user   User   @relation(fields: [userId], references: [id])
  ticket Ticket @relation(fields: [ticketId], references: [id])
}
